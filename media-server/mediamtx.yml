# MediaMTX Configuration for Neustream
# Optimized for multi-destination streaming without FFmpeg

api: yes
apiAddress: :9997

# RTMP Configuration (Input)
rtmp: yes
rtmpAddress: :1935

# HLS Configuration (for playback)
hls: yes
hlsAddress: :8888
hlsVariant: lowLatency

# WebRTC Configuration (for low latency playback)
webrtc: yes
webrtcAddress: :8889

# Global Settings
logLevel: info
logDestinations: [stdout]

# Paths Configuration
paths:
  # Default path for incoming streams
  live:
    runOnReady: /opt/neustream/on_stream_ready.sh $MTX_PATH
    runOnNotReady: /opt/neustream/on_stream_unpublish.sh $MTX_PATH

  # Catch-all for any stream key
  all_others:
    runOnReady: /opt/neustream/on_stream_ready.sh $MTX_PATH
    runOnNotReady: /opt/neustream/on_stream_unpublish.sh $MTX_PATH
